<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bonito — Ethan Granat</title>
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="style.css">
  <style>
    /* Only for this page’s simple vertical stack */
    .stack{
      display:flex; flex-direction:column; align-items:center;
      gap:12px; width:100%;
    }
    .ig-link{
      font:12px ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      color: var(--muted, #777); text-decoration:none;
      position: relative; z-index: 2; /* ensure above the video’s control bar area */
    }
    .ig-link:hover{ text-decoration:underline; color:inherit; }
  </style>
</head>
<body class="bonito">
  <header>
    <div class="title">Ethan Granat</div>
  </header>

  <!-- right-side fixed menu -->
  <nav class="side-links" aria-label="Site links">
    <a href="ATROPHIED.html">ATROPHIED</a>
    <a href="news.html">News</a>
    <a href="index.html">Projects</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
    <a href="bonito.html" aria-current="page">Bonito</a>
  </nav>

  <main>
    <div class="gallery" id="gallery" aria-label="Bonito Video Area"></div>
  </main>

  <footer>© <span id="y"></span> Ethan</footer>

  <script>
  (function () {
    var g = document.getElementById('gallery');
    if (!g) return;

    // Center content and stack video + link
    g.style.display = 'flex';
    g.style.alignItems = 'center';
    g.style.justifyContent = 'center';
    g.style.position = 'relative';

    var stack = document.createElement('div');
    stack.className = 'stack';
    g.appendChild(stack);

    // Video (GitHub Pages path)
    var vid = document.createElement('video');
    vid.controls = true;
    vid.playsInline = true;
    vid.preload = 'metadata';
    vid.src = '/testing-portfolio/videos/bonitov5.mp4';
    vid.style.display = 'block';
    vid.style.width = 'auto';
    vid.style.maxWidth = '100%'; // further constrained by JS for right menu
    vid.style.height = 'auto';
    vid.style.maxHeight = '100%'; // capped by JS to leave space for link
    vid.style.pointerEvents = 'auto';
    stack.appendChild(vid);

    // Instagram link BELOW the video (on whitespace, clickable)
    var link = document.createElement('a');
    link.className = 'ig-link';
    link.href = 'https://www.instagram.com/reel/DFdfDSjPm6w/';
    link.target = '_blank';
    link.rel = 'noopener';
    link.textContent = 'View on Instagram →';
    stack.appendChild(link);

    function vpad(el){
      var cs = window.getComputedStyle ? getComputedStyle(el) : el.currentStyle;
      return (parseFloat(cs.paddingTop)||0) + (parseFloat(cs.paddingBottom)||0);
    }

    function fit(){
      // Height between header and footer (no page scroll)
      var vh     = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight || 0;
      var header = document.querySelector('header');
      var footer = document.querySelector('footer');
      var main   = document.querySelector('main');
      var menu   = document.querySelector('.side-links');

      var headerH = header ? header.offsetHeight : 0;
      var footerH = footer ? footer.offsetHeight : 0;
      var mainPad = main ? vpad(main) : 0;

      var h = Math.max(0, vh - headerH - footerH - mainPad);
      g.style.height = h + 'px';

      // Keep the video out from under the right-side menu (desktop)
      var rightReserve = 0;
      if (menu) rightReserve = Math.ceil(menu.getBoundingClientRect().width) + 12;

      // Respect main's horizontal padding (10 + 10 = 20)
      var maxW = 'calc(100vw - ' + (20 + rightReserve) + 'px)';
      vid.style.maxWidth = maxW;

      // Reserve space for the link so it sits fully below the video on whitespace
      var linkH = link.offsetHeight || 18;
      var GAP_TOP = 8;   // space above video (inside gallery)
      var GAP_BETWEEN = 12; // matches .stack gap
      var GAP_BOTTOM = 14;  // whitespace above footer
      var usableForVideo = Math.max(120, h - (GAP_TOP + GAP_BETWEEN + linkH + GAP_BOTTOM));
      vid.style.maxHeight = usableForVideo + 'px';
    }

    // Init + lifecycle
    fit();
    window.addEventListener('load', fit);
    window.addEventListener('resize', fit);
    window.addEventListener('orientationchange', fit);
    window.addEventListener('pageshow', fit);
    vid.addEventListener('loadedmetadata', fit);

    // Footer year
    var y = document.getElementById('y');
    if (y) y.textContent = new Date().getFullYear();
  })();
  </script>
</body>
</html>
